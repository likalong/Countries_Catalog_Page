{"ast":null,"code":"import \"core-js/modules/es.regexp.flags.js\";\nimport \"core-js/modules/es.array.push.js\";\n//\nexport default {\n  name: \"App\",\n  components: {},\n  data: () => ({\n    // filteredItems: \"\",\n    headers: [\"Flags\", \"Name\", \"CCA2\", \"CCA3\", \"Native name\", \"Alt name\", \"IDD\"],\n    items: \"\",\n    itemsPerPage: 25,\n    currentPage: 1,\n    totalPage: 1,\n    loading: true,\n    filterRow: [\"capital\"],\n    filters: {\n      all: \"\",\n      name: \"\",\n      capital: \"\",\n      region: \"\",\n      flag: \"\"\n    },\n    emptyItem: [{}]\n  }),\n  created() {\n    this.getCountries();\n  },\n  methods: {\n    CreateEmptyItem() {\n      for (let i = 0; i < this.headers.length; i++) {\n        this.emptyItem[this.headers[i]] = \"\";\n      }\n    },\n    getCountries() {\n      this.axios.get(\"/all\").then(res => {\n        this.items = res.data;\n        this.totalPage = this.items.length / this.itemsPerPage;\n        console.log(\"items type  flage \", typeof this.items[0].flags);\n        console.log(\"items type  \", typeof this.items);\n        console.log(\"items length  \", this.items.length);\n        console.log(\"get data \", this.items[0]);\n        //  this.filteredItems = res.data;\n        this.loading = false;\n      });\n    },\n    SelectedFilterRowsItem(headerName) {\n      console.log(\"click filter dropdown\");\n      if (this.filterRow.indexOf(headerName) != -1) {\n        this.filterRow.splice(this.filterRow.indexOf(headerName), 1);\n        this.filters[headerName] = '';\n      } else {\n        this.filterRow.push(headerName);\n      }\n    }\n  },\n  computed: {\n    filteredItems() {\n      if (this.loading) return this.emptyItem;\n      let filterByColumn = true;\n      let filtered = [{}];\n      if (this.filters.all != \"\") filterByColumn = false;\n      function getObjectValuesWithFilter(item, filterCriteria) {\n        let trueCount = 0;\n        if (typeof item == \"object\") {\n          Object.values(item).some(key => {\n            if (typeof key != \"object\") {\n              if (String(key).toLowerCase().includes(filterCriteria)) trueCount++;\n            } else {\n              trueCount += getObjectValuesWithFilter(key, filterCriteria);\n            }\n          });\n        } else {\n          if (String(item).toLowerCase().includes(filterCriteria)) trueCount++;\n        }\n        return trueCount;\n      }\n      if (filterByColumn) {\n        filtered = this.items.filter(item => {\n          return Object.keys(this.filters).every(key => String(item[key]).toLowerCase().includes(this.filters[key].toLowerCase()));\n        });\n      } else {\n        filtered = [{}];\n        filtered = this.items.filter(item => {\n          return Object.values(item).some(key => {\n            let trueCount = 0;\n            trueCount += getObjectValuesWithFilter(key, this.filters.all.toLowerCase());\n            return trueCount > 0 ? true : false;\n          });\n        });\n      }\n      return filtered.length > 0 ? filtered : this.emptyItem;\n    }\n  }\n};","map":{"version":3,"names":["name","components","data","headers","items","itemsPerPage","currentPage","totalPage","loading","filterRow","filters","all","capital","region","flag","emptyItem","created","getCountries","methods","CreateEmptyItem","i","length","axios","get","then","res","console","log","flags","SelectedFilterRowsItem","headerName","indexOf","splice","push","computed","filteredItems","filterByColumn","filtered","getObjectValuesWithFilter","item","filterCriteria","trueCount","Object","values","some","key","String","toLowerCase","includes","filter","keys","every"],"sources":["/Users/lika/Desktop/countries-catalog-page/src/components/CountriesList.vue"],"sourcesContent":["<template>\n    <div id=\"app\">\n      <div>\n        <div class=\"card-body\">\n          <div class=\"card-title\">\n            Fields to Filter\n          </div>\n          <div class=\"row\">\n          \n            <div class=\"col-9\">\n              <input \n                type=\"text\" \n                class=\"form-control\" \n                placeholder=\"Search all values\" \n                aria-label=\"Search all values\" \n                aria-describedby=\"basic-addon2\"\n                v-model=\"filters.all\"\n              >\n            </div>\n            <div class=\"col-3\">\n              <div class=\"dropdown\">\n                <button \n                  class=\"btn btn-secondary \n                  dropdown-toggle\" \n                  type=\"button\" \n                  id=\"fieldsMenuDropdown\" \n                  data-bs-toggle=\"dropdown\" \n                  aria-expanded=\"false\"\n                >\n                  Dropdown button\n                </button>\n                <ul class=\"dropdown-menu\" aria-labelledby=\"fieldsMenuDropdown\">\n                  <div v-for=\"header in headers\" :key=\"header\">\n                    <li><a class=\"dropdown-item\" @click=\"SelectedFilterRowsItem(header)\">\n                      <i \n                        :class=\" \n                          filterRow.indexOf(header) != -1 ? 'bi bi-check-lg' : 'bi'\n                        \"\n                        aria-hidden=\"true\"\n                      ></i>\n                      {{ header }}\n                    </a></li>\n                  </div>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- end filter section -->\n        <!-- <template> -->\n          <div class=\"TableClass\">\n              <table\n                striped\n                hover\n                class=\"table table-sm\"\n                :items=\"filteredItems\"\n                :fields=\"headers\"\n                :busy=\"loading\"\n              >\n                <thead>\n                  <tr>\n                    <th v-for=\"header in headers\" :key=\"header\">{{ header }}</th>\n                  </tr>\n                </thead>\n\n                <template>\n                  <div class=\"text-center text-danger my-2\" v-if=\"loading\">\n                    <div class=\"spinner-border text-secondary\" role=\"status\">\n                      <span class=\"sr-only\">Loading...</span>\n                    </div>\n                  </div>\n                </template>\n\n                <tbody>\n                  <!-- <template slot=\"top-row\" slot-scope=\"{ fields }\"> -->\n                    <tr v-for=\"item in items\" :key=\"item\">\n                      \n                      <!-- <th scope=\"row\">{{ item.flags.png }}</th> -->\n                      <th scope=\"row\"><img :src=\"item.flags.png\" class=\"FlagClass\"></th>\n                      <td >{{ item.name.common }}</td>\n                      <td>{{ item.cca2 }}</td>\n                      <td>{{ item.cca3 }}</td>\n                      <td>{{ item.name.nativeName.ara.official }}</td>\n                      <td v-for=\"(altname) in item.altSpellings\" :key=\"altname\">\n                        <span >{{ alname }} </span>\n                      </td>\n                      <td>{{ item.idd.root }}</td>\n                    </tr>\n                  <!-- </template> -->\n\n                  <tr>\n                    <!-- <th scope=\"row\"><i></i>{{ item.flags.png }}</th> -->\n                    <td>Mark</td>\n                    <td>Otto</td>\n                    <td>@mdo</td>\n                  </tr>\n                  <tr>\n                    <th scope=\"row\">2</th>\n                    <td>Jacob</td>\n                    <td>Thornton</td>\n                    <td>@fat</td>\n                  </tr>\n                  <tr>\n                    <th scope=\"row\">3</th>\n                    <td colspan=\"2\">Larry the Bird</td>\n                    <td>@twitter</td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n\n            \n\n              <nav aria-label=\"...\">\n                <ul class=\"pagination\">\n                  <li class=\"page-item disabled\">\n                    <a class=\"page-link\" href=\"#\" tabindex=\"-1\">Previous</a>\n                  </li>\n                  <li \n                    v-for=\"pageNumber in totalPage\" :key=\"pageNumber\"\n                    :class=\"pageNumber == currentPage ? 'page-item active': 'page-item'\" \n\n                  >\n                    <a class=\"page-link\" href=\"#\">\n                    {{ pageNumber }}</a>\n                  </li>\n                  \n                  <li class=\"page-item\">\n                    <a class=\"page-link\" href=\"#\">Next</a>\n                  </li>\n                </ul>\n              </nav>\n            <!-- </template> -->\n\n      </div>\n    </div>\n</template>\n\n<script>\n  //\n  export default {\n    name: \"App\",\n    components: {},\n    data: () => ({\n      // filteredItems: \"\",\n      headers: [\"Flags\", \"Name\", \"CCA2\", \"CCA3\", \"Native name\", \"Alt name\", \"IDD\"],\n      items: \"\",\n      itemsPerPage:25,\n      currentPage: 1,\n      totalPage: 1,\n      loading: true,\n      filterRow: [\"capital\"],\n      filters: {\n        all: \"\",\n        name: \"\",\n        capital: \"\",\n        region: \"\",\n        flag: \"\",\n      },\n  \n      emptyItem: [{}],\n    }),\n    created() {\n      this.getCountries();\n    },\n    methods: {\n      CreateEmptyItem() {\n        for (let i = 0; i < this.headers.length; i++) {\n          this.emptyItem[this.headers[i]] = \"\";\n        }\n      },\n      getCountries() {\n        this.axios.get(\"/all\").then((res) => {\n          this.items = res.data;\n          this.totalPage = this.items.length/this.itemsPerPage;\n          console.log(\"items type  flage \", typeof(this.items[0].flags))\n          console.log(\"items type  \", typeof(this.items))\n          console.log(\"items length  \", this.items.length)\n          console.log(\"get data \", this.items[0])\n          //  this.filteredItems = res.data;\n          this.loading = false;\n        });\n      },\n  \n      SelectedFilterRowsItem(headerName) {\n        console.log(\"click filter dropdown\")\n        if (this.filterRow.indexOf(headerName) != -1) {\n          this.filterRow.splice(this.filterRow.indexOf(headerName), 1);\n          this.filters[headerName] = '';\n        } else {\n          this.filterRow.push(headerName);\n        }\n      },\n    },\n  \n    computed: {\n      filteredItems() {\n        if (this.loading) return this.emptyItem;\n  \n        let filterByColumn = true;\n        let filtered = [{}];\n  \n        if (this.filters.all != \"\") filterByColumn = false;\n  \n        function getObjectValuesWithFilter(item, filterCriteria) {\n          let trueCount = 0;\n          if (typeof item == \"object\") {\n            Object.values(item).some((key) => {\n              if (typeof key != \"object\") {\n                if (String(key).toLowerCase().includes(filterCriteria))\n                  trueCount++;\n              } else {\n                trueCount += getObjectValuesWithFilter(key, filterCriteria);\n              }\n            });\n          } else {\n            if (String(item).toLowerCase().includes(filterCriteria)) trueCount++;\n          }\n          return trueCount;\n        }\n  \n        if (filterByColumn) {\n          filtered = this.items.filter((item) => {\n            return Object.keys(this.filters).every((key) =>\n              String(item[key])\n                .toLowerCase()\n                .includes(this.filters[key].toLowerCase())\n            );\n          });\n        } else {\n          filtered = [{}];\n  \n          filtered = this.items.filter((item) => {\n            return Object.values(item).some((key) => {\n              let trueCount = 0;\n              trueCount += getObjectValuesWithFilter(\n                key,\n                this.filters.all.toLowerCase()\n              );\n  \n              return trueCount > 0 ? true : false;\n            });\n          });\n        }\n  \n        return filtered.length > 0 ? filtered : this.emptyItem;\n      },\n    },\n  };\n  </script>\n  \n  <style scoped>\n  .TableClass {\n    margin: calc(2vw);\n  }\n\n  .FlagClass {\n    width: 50px;\n    height: auto;\n  }\n  </style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}